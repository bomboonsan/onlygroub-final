---
import { Image } from 'astro:assets';

import { formatDateToThai } from '../lib/formatDate';

const { post } = Astro.props;

import '../styles/movie.scss';
---
<main>
<article>
    <div class="movie-detail-container">
        <div class="movie-detail">
            <div class="movie-link-wrap"><a class="movie-link" href="/movie">ดูหนัง</a></div>
            <h1 class="movie-name">{post.title}</h1>
            <dl class="movie-info">
                <dt>ผู้กำกับ</dt>
                <dd>{post.movie.director}</dd>
                <dt>นักแสดงนำ</dt>
                <dd>{post.movie.actors}</dd>
                <dt>วันที่ฉาย</dt>
                <dd>{formatDateToThai(post.movie.releaseDate)}</dd>                
            </dl>
        </div>
        <div class="movie-poster">
            <Image
                class="rounded-lg"
                src={post.featuredImageMedium.node.sourceUrl}
                alt={`ดูหนัง ${post.title} เต็มเรื่อง`}
                width="800"
                height="450"
                sizes="(max-width: 800px) 100vw, 800px"
                loading="lazy"
            />
        </div>
        {post.movie.synopsis && (
            <div class="movie-synopsis">
                <p class="title">เรื่องย่อ</p>
                <div class="font-light" set:html={post.movie.synopsis}></div>
            </div>
        )}
    </div>
    <!-- <div class="ads">
        <div class="inner">
            <img src="https://placehold.co/300x250?text=ADS" alt="Hello World" />
        </div>
    </div> -->
    <div class="entry-content" set:html={post.content.replace('<a href="https://assets.onlygroub', '<a href="https://onlygroub')}></div>
    <!-- <div class="entry-content" set:html={post.content}></div> -->
    <div class="text-center">
        แก้ไขเมื่อ <time datetime={post.date}>{formatDateToThai(post.date)}</time>
    </div>
    <div class="breadcrumb">
        <ol class="flex justify-center gap-2 line-clamp-1">
            <li><a href="/">หน้าหลัก</a></li>
            <li><a href=`/category/${post.terms.nodes[0].slug}` rel="category tag">{post.terms.nodes[0].name}</a></li>
            <li><span>{post.title}</span></li>
        </ol>
    </div>
</article>
</main>